const axios = require('axios');
const { GAO_DE_WEATHER_API} = require('./constant')

const WEATHER_EMOJI_MAP = {
  "æ™´": 'ğŸŒ',
  "å°‘äº‘": 'ğŸŒ¤ï¸',
  "æ™´é—´å¤šäº‘": 'â›…ï¸',
  "å¤šäº‘": 'ğŸŒ¥ï¸',
  "é˜´": 'â˜ï¸',
  "æœ‰é£": 'ğŸŒ¬ï¸',
  "å¹³é™": '',
  "å¾®é£": 'ğŸŒ¬ï¸',
  "å’Œé£": 'ğŸŒ¬ï¸',
  "æ¸…é£": 'ğŸŒ¬ï¸',
  "å¼ºé£/åŠ²é£": 'ğŸŒ¬ï¸',
  "ç–¾é£": 'ğŸŒ¬ï¸',
  "å¤§é£": 'ğŸŒ¬ï¸',
  "çƒˆé£": 'ğŸŒ¬ï¸',
  "é£æš´": 'ğŸŒ¬ï¸',
  "ç‹‚çˆ†é£": 'ğŸŒ¬ï¸',
  "é£“é£": 'ğŸŒ¬ï¸',
  "çƒ­å¸¦é£æš´": 'ğŸŒ¬ï¸',
  "éœ¾": 'ğŸŒ«',
  "ä¸­åº¦éœ¾": 'ğŸŒ«ğŸŒ«',
  "é‡åº¦éœ¾": 'ğŸŒ«ğŸŒ«ğŸŒ«',
  "ä¸¥é‡éœ¾": 'ğŸŒ«ğŸŒ«ğŸŒ«ğŸŒ«',
  "é˜µé›¨": 'ğŸŒ¦',
  "é›·é˜µé›¨": 'â›ˆï¸',
  "é›·é˜µé›¨å¹¶ä¼´æœ‰å†°é›¹": 'âš¡ï¸ğŸŒ§ğŸŒ¨',
  "å°é›¨": 'ğŸŒ§',
  "ä¸­é›¨": 'ğŸŒ§ğŸŒ§',
  "å¤§é›¨": 'ğŸŒ§ğŸŒ§ğŸŒ§',
  "æš´é›¨": 'ğŸŒ§ğŸŒ§ğŸŒ§ğŸŒ§',
  "å¤§æš´é›¨": 'ğŸŒ§ğŸŒ§ğŸŒ§ğŸŒ§ğŸŒ§',
  "ç‰¹å¤§æš´é›¨": 'ğŸŒ§ğŸŒ§ğŸŒ§ğŸŒ§ğŸŒ§',
  "å¼ºé˜µé›¨": 'ğŸŒ¦ğŸŒ¦',
  "å¼ºé›·é˜µé›¨": 'â›ˆï¸â›ˆï¸',
  "æç«¯é™é›¨": 'ğŸŒ§ï¸',
  "æ¯›æ¯›é›¨/ç»†é›¨": 'ğŸŒ§ï¸',
  "é›¨": 'ğŸŒ§ï¸',
  "å°é›¨-ä¸­é›¨": 'ğŸŒ§ï¸',
  "ä¸­é›¨-å¤§é›¨": 'ğŸŒ§ï¸ğŸŒ§ï¸',
  "å¤§é›¨-æš´é›¨": 'ğŸŒ§ï¸ğŸŒ§ï¸ğŸŒ§ï¸',
  "æš´é›¨-å¤§æš´é›¨": 'ğŸŒ§ï¸ğŸŒ§ï¸ğŸŒ§ï¸ğŸŒ§ï¸',
  "å¤§æš´é›¨-ç‰¹å¤§æš´é›¨": 'ğŸŒ§ï¸ğŸŒ§ï¸ğŸŒ§ï¸ğŸŒ§ï¸ğŸŒ§ï¸',
  "é›¨é›ªå¤©æ°”": 'ğŸŒ§ï¸ğŸŒ¨ï¸',
  "é›¨å¤¹é›ª": 'ğŸŒ§ï¸ğŸŒ¨ï¸',
  "é˜µé›¨å¤¹é›ª": 'ğŸŒ§ï¸ğŸŒ¨ï¸',
  "å†»é›¨": 'â„ï¸ğŸŒ§ï¸',
  "é›ª": 'ğŸŒ¨ï¸',
  "é˜µé›ª": 'ğŸŒ¨ï¸',
  "å°é›ª": 'ğŸŒ¨ï¸',
  "ä¸­é›ª": 'ğŸŒ¨ï¸ğŸŒ¨ï¸',
  "å¤§é›ª": 'ğŸŒ¨ï¸ğŸŒ¨ï¸ğŸŒ¨ï¸',
  "æš´é›ª": 'ğŸŒ¨ï¸ğŸŒ¨ï¸ğŸŒ¨ï¸ğŸŒ¨ï¸',
  "å°é›ª-ä¸­é›ª": 'ğŸŒ¨ï¸',
  "ä¸­é›ª-å¤§é›ª": 'ğŸŒ¨ï¸ğŸŒ¨ï¸',
  "å¤§é›ª-æš´é›ª": 'ğŸŒ¨ï¸ğŸŒ¨ï¸ğŸŒ¨ï¸',
  "æµ®å°˜": 'ğŸœ',
  "æ‰¬æ²™": 'ğŸœğŸœ',
  "æ²™å°˜æš´": 'ğŸœğŸœğŸœ',
  "å¼ºæ²™å°˜æš´": 'ğŸœğŸœğŸœ',
  "é¾™å·é£": 'ğŸŒªï¸',
  "é›¾": 'ğŸŒ«',
  "æµ“é›¾": 'ğŸŒ«',
  "å¼ºæµ“é›¾": 'ğŸŒ«',
  "è½»é›¾": 'ğŸŒ«',
  "å¤§é›¾": 'ğŸŒ«',
  "ç‰¹å¼ºæµ“é›¾": 'ğŸŒ«',
  "çƒ­": 'ğŸ¥µ',
  "å†·": 'ğŸ¥¶',
  "æœªçŸ¥": '',
}

async function getWeather() {
  const addr = GAO_DE_WEATHER_API;
  const res = await axios({
    url: addr,
    method: 'get',
    params: {
      key: 'b3bd9d8e49a9a192451cc6c23097c6bc',
      city: '610113',
      extensions: 'base',
    }
  })
  const weatherData = res.data;
  if (weatherData?.status == 1 && weatherData?.infocode == 10000) {
    const liveWeather = weatherData?.lives?.[0];
    if (liveWeather) {
      const { city, weather, temperature,} = liveWeather
      const weatherEmoji = WEATHER_EMOJI_MAP[weather] || ''
      return `${city}å½“å‰,${weather}${weatherEmoji}  ğŸŒ¡ ${temperature}â„ƒã€‚`
    }
  }
}

module.exports = {
  getWeather
}